{"ast":null,"code":"'use strict';\n\nconst os = require('os');\n\nconst escapeStringRegexp = require('escape-string-regexp');\n\nconst extractPathRegex = /\\s+at.*[(\\s](.*)\\)?/;\nconst pathRegex = /^(?:(?:(?:node|(?:internal\\/[\\w/]*|.*node_modules\\/(?:babel-polyfill|pirates)\\/.*)?\\w+)\\.js:\\d+:\\d+)|native)/;\nconst homeDir = typeof os.homedir === 'undefined' ? '' : os.homedir();\n\nmodule.exports = (stack, {\n  pretty = false,\n  basePath\n} = {}) => {\n  const basePathRegex = basePath && new RegExp(`(at | \\\\()${escapeStringRegexp(basePath)}`, 'g');\n  return stack.replace(/\\\\/g, '/').split('\\n').filter(line => {\n    const pathMatches = line.match(extractPathRegex);\n\n    if (pathMatches === null || !pathMatches[1]) {\n      return true;\n    }\n\n    const match = pathMatches[1]; // Electron\n\n    if (match.includes('.app/Contents/Resources/electron.asar') || match.includes('.app/Contents/Resources/default_app.asar')) {\n      return false;\n    }\n\n    return !pathRegex.test(match);\n  }).filter(line => line.trim() !== '').map(line => {\n    if (basePathRegex) {\n      line = line.replace(basePathRegex, '$1');\n    }\n\n    if (pretty) {\n      line = line.replace(extractPathRegex, (m, p1) => m.replace(p1, p1.replace(homeDir, '~')));\n    }\n\n    return line;\n  }).join('\\n');\n};","map":{"version":3,"sources":["/Users/hristobelchev/test_projects/testing_react/react-box-app/box-app/node_modules/@oclif/errors/node_modules/clean-stack/index.js"],"names":["os","require","escapeStringRegexp","extractPathRegex","pathRegex","homeDir","homedir","module","exports","stack","pretty","basePath","basePathRegex","RegExp","replace","split","filter","line","pathMatches","match","includes","test","trim","map","m","p1","join"],"mappings":"AAAA;;AACA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAMC,kBAAkB,GAAGD,OAAO,CAAC,sBAAD,CAAlC;;AAEA,MAAME,gBAAgB,GAAG,qBAAzB;AACA,MAAMC,SAAS,GAAG,8GAAlB;AACA,MAAMC,OAAO,GAAG,OAAOL,EAAE,CAACM,OAAV,KAAsB,WAAtB,GAAoC,EAApC,GAAyCN,EAAE,CAACM,OAAH,EAAzD;;AAEAC,MAAM,CAACC,OAAP,GAAiB,CAACC,KAAD,EAAQ;AAACC,EAAAA,MAAM,GAAG,KAAV;AAAiBC,EAAAA;AAAjB,IAA6B,EAArC,KAA4C;AAC5D,QAAMC,aAAa,GAAGD,QAAQ,IAAI,IAAIE,MAAJ,CAAY,aAAYX,kBAAkB,CAACS,QAAD,CAAW,EAArD,EAAwD,GAAxD,CAAlC;AAEA,SAAOF,KAAK,CAACK,OAAN,CAAc,KAAd,EAAqB,GAArB,EACLC,KADK,CACC,IADD,EAELC,MAFK,CAEEC,IAAI,IAAI;AACf,UAAMC,WAAW,GAAGD,IAAI,CAACE,KAAL,CAAWhB,gBAAX,CAApB;;AACA,QAAIe,WAAW,KAAK,IAAhB,IAAwB,CAACA,WAAW,CAAC,CAAD,CAAxC,EAA6C;AAC5C,aAAO,IAAP;AACA;;AAED,UAAMC,KAAK,GAAGD,WAAW,CAAC,CAAD,CAAzB,CANe,CAQf;;AACA,QACCC,KAAK,CAACC,QAAN,CAAe,uCAAf,KACAD,KAAK,CAACC,QAAN,CAAe,0CAAf,CAFD,EAGE;AACD,aAAO,KAAP;AACA;;AAED,WAAO,CAAChB,SAAS,CAACiB,IAAV,CAAeF,KAAf,CAAR;AACA,GAnBK,EAoBLH,MApBK,CAoBEC,IAAI,IAAIA,IAAI,CAACK,IAAL,OAAgB,EApB1B,EAqBLC,GArBK,CAqBDN,IAAI,IAAI;AACZ,QAAIL,aAAJ,EAAmB;AAClBK,MAAAA,IAAI,GAAGA,IAAI,CAACH,OAAL,CAAaF,aAAb,EAA4B,IAA5B,CAAP;AACA;;AAED,QAAIF,MAAJ,EAAY;AACXO,MAAAA,IAAI,GAAGA,IAAI,CAACH,OAAL,CAAaX,gBAAb,EAA+B,CAACqB,CAAD,EAAIC,EAAJ,KAAWD,CAAC,CAACV,OAAF,CAAUW,EAAV,EAAcA,EAAE,CAACX,OAAH,CAAWT,OAAX,EAAoB,GAApB,CAAd,CAA1C,CAAP;AACA;;AAED,WAAOY,IAAP;AACA,GA/BK,EAgCLS,IAhCK,CAgCA,IAhCA,CAAP;AAiCA,CApCD","sourcesContent":["'use strict';\nconst os = require('os');\nconst escapeStringRegexp = require('escape-string-regexp');\n\nconst extractPathRegex = /\\s+at.*[(\\s](.*)\\)?/;\nconst pathRegex = /^(?:(?:(?:node|(?:internal\\/[\\w/]*|.*node_modules\\/(?:babel-polyfill|pirates)\\/.*)?\\w+)\\.js:\\d+:\\d+)|native)/;\nconst homeDir = typeof os.homedir === 'undefined' ? '' : os.homedir();\n\nmodule.exports = (stack, {pretty = false, basePath} = {}) => {\n\tconst basePathRegex = basePath && new RegExp(`(at | \\\\()${escapeStringRegexp(basePath)}`, 'g');\n\n\treturn stack.replace(/\\\\/g, '/')\n\t\t.split('\\n')\n\t\t.filter(line => {\n\t\t\tconst pathMatches = line.match(extractPathRegex);\n\t\t\tif (pathMatches === null || !pathMatches[1]) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst match = pathMatches[1];\n\n\t\t\t// Electron\n\t\t\tif (\n\t\t\t\tmatch.includes('.app/Contents/Resources/electron.asar') ||\n\t\t\t\tmatch.includes('.app/Contents/Resources/default_app.asar')\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn !pathRegex.test(match);\n\t\t})\n\t\t.filter(line => line.trim() !== '')\n\t\t.map(line => {\n\t\t\tif (basePathRegex) {\n\t\t\t\tline = line.replace(basePathRegex, '$1');\n\t\t\t}\n\n\t\t\tif (pretty) {\n\t\t\t\tline = line.replace(extractPathRegex, (m, p1) => m.replace(p1, p1.replace(homeDir, '~')));\n\t\t\t}\n\n\t\t\treturn line;\n\t\t})\n\t\t.join('\\n');\n};\n"]},"metadata":{},"sourceType":"script"}