{"ast":null,"code":"\"use strict\";\n\nvar gitUp = require(\"git-up\");\n/**\n * gitUrlParse\n * Parses a Git url.\n *\n * @name gitUrlParse\n * @function\n * @param {String} url The Git url to parse.\n * @return {GitUrl} The `GitUrl` object containing:\n *\n *  - `protocols` (Array): An array with the url protocols (usually it has one element).\n *  - `port` (null|Number): The domain port.\n *  - `resource` (String): The url domain (including subdomains).\n *  - `user` (String): The authentication user (usually for ssh urls).\n *  - `pathname` (String): The url pathname.\n *  - `hash` (String): The url hash.\n *  - `search` (String): The url querystring value.\n *  - `href` (String): The input url.\n *  - `protocol` (String): The git url protocol.\n *  - `token` (String): The oauth token (could appear in the https urls).\n *  - `source` (String): The Git provider (e.g. `\"github.com\"`).\n *  - `owner` (String): The repository owner.\n *  - `name` (String): The repository name.\n *  - `ref` (String): The repository ref (e.g., \"master\" or \"dev\").\n *  - `filepath` (String): A filepath relative to the repository root.\n *  - `filepathtype` (String): The type of filepath in the url (\"blob\" or \"tree\").\n *  - `full_name` (String): The owner and name values in the `owner/name` format.\n *  - `toString` (Function): A function to stringify the parsed url into another url type.\n *  - `organization` (String): The organization the owner belongs to. This is CloudForge specific.\n *  - `git_suffix` (Boolean): Whether to add the `.git` suffix or not.\n *\n */\n\n\nfunction gitUrlParse(url) {\n  if (typeof url !== \"string\") {\n    throw new Error(\"The url must be a string.\");\n  }\n\n  var urlInfo = gitUp(url),\n      sourceParts = urlInfo.resource.split(\".\"),\n      splits = null;\n\n  urlInfo.toString = function (type) {\n    return gitUrlParse.stringify(this, type);\n  };\n\n  urlInfo.source = sourceParts.length > 2 ? sourceParts.slice(1 - sourceParts.length).join(\".\") : urlInfo.source = urlInfo.resource; // Note: Some hosting services (e.g. Visual Studio Team Services) allow whitespace characters\n  // in the repository and owner names so we decode the URL pieces to get the correct result\n\n  urlInfo.git_suffix = /\\.git$/.test(urlInfo.pathname);\n  urlInfo.name = decodeURIComponent(urlInfo.pathname.replace(/^\\//, '').replace(/\\.git$/, \"\"));\n  urlInfo.owner = decodeURIComponent(urlInfo.user);\n\n  switch (urlInfo.source) {\n    case \"git.cloudforge.com\":\n      urlInfo.owner = urlInfo.user;\n      urlInfo.organization = sourceParts[0];\n      urlInfo.source = \"cloudforge.com\";\n      break;\n\n    case \"visualstudio.com\":\n      // Handle VSTS SSH URLs\n      if (urlInfo.resource === 'vs-ssh.visualstudio.com') {\n        splits = urlInfo.name.split(\"/\");\n\n        if (splits.length === 4) {\n          urlInfo.organization = splits[1];\n          urlInfo.owner = splits[2];\n          urlInfo.name = splits[3];\n          urlInfo.full_name = splits[2] + '/' + splits[3];\n        }\n\n        break;\n      } else {\n        splits = urlInfo.name.split(\"/\");\n\n        if (splits.length === 2) {\n          urlInfo.owner = splits[1];\n          urlInfo.name = splits[1];\n          urlInfo.full_name = '_git/' + urlInfo.name;\n        } else if (splits.length === 3) {\n          urlInfo.name = splits[2];\n\n          if (splits[0] === 'DefaultCollection') {\n            urlInfo.owner = splits[2];\n            urlInfo.organization = splits[0];\n            urlInfo.full_name = urlInfo.organization + '/_git/' + urlInfo.name;\n          } else {\n            urlInfo.owner = splits[0];\n            urlInfo.full_name = urlInfo.owner + '/_git/' + urlInfo.name;\n          }\n        } else if (splits.length === 4) {\n          urlInfo.organization = splits[0];\n          urlInfo.owner = splits[1];\n          urlInfo.name = splits[3];\n          urlInfo.full_name = urlInfo.organization + '/' + urlInfo.owner + '/_git/' + urlInfo.name;\n        }\n\n        break;\n      }\n\n    // Azure DevOps (formerly Visual Studio Team Services)\n\n    case \"dev.azure.com\":\n    case \"azure.com\":\n      if (urlInfo.resource === 'ssh.dev.azure.com') {\n        splits = urlInfo.name.split(\"/\");\n\n        if (splits.length === 4) {\n          urlInfo.organization = splits[1];\n          urlInfo.owner = splits[2];\n          urlInfo.name = splits[3];\n        }\n\n        break;\n      } else {\n        splits = urlInfo.name.split(\"/\");\n\n        if (splits.length === 5) {\n          urlInfo.organization = splits[0];\n          urlInfo.owner = splits[1];\n          urlInfo.name = splits[4];\n          urlInfo.full_name = '_git/' + urlInfo.name;\n        } else if (splits.length === 3) {\n          urlInfo.name = splits[2];\n\n          if (splits[0] === 'DefaultCollection') {\n            urlInfo.owner = splits[2];\n            urlInfo.organization = splits[0];\n            urlInfo.full_name = urlInfo.organization + '/_git/' + urlInfo.name;\n          } else {\n            urlInfo.owner = splits[0];\n            urlInfo.full_name = urlInfo.owner + '/_git/' + urlInfo.name;\n          }\n        } else if (splits.length === 4) {\n          urlInfo.organization = splits[0];\n          urlInfo.owner = splits[1];\n          urlInfo.name = splits[3];\n          urlInfo.full_name = urlInfo.organization + '/' + urlInfo.owner + '/_git/' + urlInfo.name;\n        }\n\n        break;\n      }\n\n    default:\n      splits = urlInfo.name.split(\"/\");\n      var nameIndex = splits.length - 1;\n\n      if (splits.length >= 2) {\n        var blobIndex = splits.indexOf(\"blob\", 2);\n        var treeIndex = splits.indexOf(\"tree\", 2);\n        var commitIndex = splits.indexOf(\"commit\", 2);\n        nameIndex = blobIndex > 0 ? blobIndex - 1 : treeIndex > 0 ? treeIndex - 1 : commitIndex > 0 ? commitIndex - 1 : nameIndex;\n        urlInfo.owner = splits.slice(0, nameIndex).join('/');\n        urlInfo.name = splits[nameIndex];\n\n        if (commitIndex) {\n          urlInfo.commit = splits[nameIndex + 2];\n        }\n      }\n\n      urlInfo.ref = \"\";\n      urlInfo.filepathtype = \"\";\n      urlInfo.filepath = \"\";\n\n      if (splits.length > nameIndex + 2 && [\"blob\", \"tree\"].indexOf(splits[nameIndex + 1]) >= 0) {\n        urlInfo.filepathtype = splits[nameIndex + 1];\n        urlInfo.ref = splits[nameIndex + 2];\n\n        if (splits.length > nameIndex + 3) {\n          urlInfo.filepath = splits.slice(nameIndex + 3).join('/');\n        }\n      }\n\n      urlInfo.organization = urlInfo.owner;\n      break;\n  }\n\n  if (!urlInfo.full_name) {\n    urlInfo.full_name = urlInfo.owner;\n\n    if (urlInfo.name) {\n      urlInfo.full_name && (urlInfo.full_name += \"/\");\n      urlInfo.full_name += urlInfo.name;\n    }\n  }\n\n  return urlInfo;\n}\n/**\n * stringify\n * Stringifies a `GitUrl` object.\n *\n * @name stringify\n * @function\n * @param {GitUrl} obj The parsed Git url object.\n * @param {String} type The type of the stringified url (default `obj.protocol`).\n * @return {String} The stringified url.\n */\n\n\ngitUrlParse.stringify = function (obj, type) {\n  type = type || (obj.protocols && obj.protocols.length ? obj.protocols.join('+') : obj.protocol);\n  var port = obj.port ? \":\" + obj.port : '';\n  var user = obj.user || 'git';\n  var maybeGitSuffix = obj.git_suffix ? \".git\" : \"\";\n\n  switch (type) {\n    case \"ssh\":\n      if (port) return \"ssh://\" + user + \"@\" + obj.resource + port + \"/\" + obj.full_name + maybeGitSuffix;else return user + \"@\" + obj.resource + \":\" + obj.full_name + maybeGitSuffix;\n\n    case \"git+ssh\":\n    case \"ssh+git\":\n    case \"ftp\":\n    case \"ftps\":\n      return type + \"://\" + user + \"@\" + obj.resource + port + \"/\" + obj.full_name + maybeGitSuffix;\n\n    case \"http\":\n    case \"https\":\n      var auth = obj.token ? buildToken(obj) : obj.user && (obj.protocols.includes('http') || obj.protocols.includes('https')) ? obj.user + \"@\" : \"\";\n      return type + \"://\" + auth + obj.resource + port + \"/\" + obj.full_name + maybeGitSuffix;\n\n    default:\n      return obj.href;\n  }\n};\n/*!\n * buildToken\n * Builds OAuth token prefix (helper function)\n *\n * @name buildToken\n * @function\n * @param {GitUrl} obj The parsed Git url object.\n * @return {String} token prefix\n */\n\n\nfunction buildToken(obj) {\n  switch (obj.source) {\n    case \"bitbucket.org\":\n      return \"x-token-auth:\" + obj.token + \"@\";\n\n    default:\n      return obj.token + \"@\";\n  }\n}\n\nmodule.exports = gitUrlParse;","map":{"version":3,"sources":["/Users/hristobelchev/test_projects/testing_react/react-box-app/box-app/node_modules/git-url-parse/lib/index.js"],"names":["gitUp","require","gitUrlParse","url","Error","urlInfo","sourceParts","resource","split","splits","toString","type","stringify","source","length","slice","join","git_suffix","test","pathname","name","decodeURIComponent","replace","owner","user","organization","full_name","nameIndex","blobIndex","indexOf","treeIndex","commitIndex","commit","ref","filepathtype","filepath","obj","protocols","protocol","port","maybeGitSuffix","auth","token","buildToken","includes","href","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar gitUp = require(\"git-up\");\n\n/**\n * gitUrlParse\n * Parses a Git url.\n *\n * @name gitUrlParse\n * @function\n * @param {String} url The Git url to parse.\n * @return {GitUrl} The `GitUrl` object containing:\n *\n *  - `protocols` (Array): An array with the url protocols (usually it has one element).\n *  - `port` (null|Number): The domain port.\n *  - `resource` (String): The url domain (including subdomains).\n *  - `user` (String): The authentication user (usually for ssh urls).\n *  - `pathname` (String): The url pathname.\n *  - `hash` (String): The url hash.\n *  - `search` (String): The url querystring value.\n *  - `href` (String): The input url.\n *  - `protocol` (String): The git url protocol.\n *  - `token` (String): The oauth token (could appear in the https urls).\n *  - `source` (String): The Git provider (e.g. `\"github.com\"`).\n *  - `owner` (String): The repository owner.\n *  - `name` (String): The repository name.\n *  - `ref` (String): The repository ref (e.g., \"master\" or \"dev\").\n *  - `filepath` (String): A filepath relative to the repository root.\n *  - `filepathtype` (String): The type of filepath in the url (\"blob\" or \"tree\").\n *  - `full_name` (String): The owner and name values in the `owner/name` format.\n *  - `toString` (Function): A function to stringify the parsed url into another url type.\n *  - `organization` (String): The organization the owner belongs to. This is CloudForge specific.\n *  - `git_suffix` (Boolean): Whether to add the `.git` suffix or not.\n *\n */\nfunction gitUrlParse(url) {\n\n    if (typeof url !== \"string\") {\n        throw new Error(\"The url must be a string.\");\n    }\n\n    var urlInfo = gitUp(url),\n        sourceParts = urlInfo.resource.split(\".\"),\n        splits = null;\n\n    urlInfo.toString = function (type) {\n        return gitUrlParse.stringify(this, type);\n    };\n\n    urlInfo.source = sourceParts.length > 2 ? sourceParts.slice(1 - sourceParts.length).join(\".\") : urlInfo.source = urlInfo.resource;\n\n    // Note: Some hosting services (e.g. Visual Studio Team Services) allow whitespace characters\n    // in the repository and owner names so we decode the URL pieces to get the correct result\n    urlInfo.git_suffix = /\\.git$/.test(urlInfo.pathname);\n    urlInfo.name = decodeURIComponent(urlInfo.pathname.replace(/^\\//, '').replace(/\\.git$/, \"\"));\n    urlInfo.owner = decodeURIComponent(urlInfo.user);\n\n    switch (urlInfo.source) {\n        case \"git.cloudforge.com\":\n            urlInfo.owner = urlInfo.user;\n            urlInfo.organization = sourceParts[0];\n            urlInfo.source = \"cloudforge.com\";\n            break;\n        case \"visualstudio.com\":\n            // Handle VSTS SSH URLs\n            if (urlInfo.resource === 'vs-ssh.visualstudio.com') {\n                splits = urlInfo.name.split(\"/\");\n                if (splits.length === 4) {\n                    urlInfo.organization = splits[1];\n                    urlInfo.owner = splits[2];\n                    urlInfo.name = splits[3];\n                    urlInfo.full_name = splits[2] + '/' + splits[3];\n                }\n                break;\n            } else {\n                splits = urlInfo.name.split(\"/\");\n                if (splits.length === 2) {\n                    urlInfo.owner = splits[1];\n                    urlInfo.name = splits[1];\n                    urlInfo.full_name = '_git/' + urlInfo.name;\n                } else if (splits.length === 3) {\n                    urlInfo.name = splits[2];\n                    if (splits[0] === 'DefaultCollection') {\n                        urlInfo.owner = splits[2];\n                        urlInfo.organization = splits[0];\n                        urlInfo.full_name = urlInfo.organization + '/_git/' + urlInfo.name;\n                    } else {\n                        urlInfo.owner = splits[0];\n                        urlInfo.full_name = urlInfo.owner + '/_git/' + urlInfo.name;\n                    }\n                } else if (splits.length === 4) {\n                    urlInfo.organization = splits[0];\n                    urlInfo.owner = splits[1];\n                    urlInfo.name = splits[3];\n                    urlInfo.full_name = urlInfo.organization + '/' + urlInfo.owner + '/_git/' + urlInfo.name;\n                }\n                break;\n            }\n\n        // Azure DevOps (formerly Visual Studio Team Services)\n        case \"dev.azure.com\":\n        case \"azure.com\":\n            if (urlInfo.resource === 'ssh.dev.azure.com') {\n                splits = urlInfo.name.split(\"/\");\n                if (splits.length === 4) {\n                    urlInfo.organization = splits[1];\n                    urlInfo.owner = splits[2];\n                    urlInfo.name = splits[3];\n                }\n                break;\n            } else {\n                splits = urlInfo.name.split(\"/\");\n                if (splits.length === 5) {\n                    urlInfo.organization = splits[0];\n                    urlInfo.owner = splits[1];\n                    urlInfo.name = splits[4];\n                    urlInfo.full_name = '_git/' + urlInfo.name;\n                } else if (splits.length === 3) {\n                    urlInfo.name = splits[2];\n                    if (splits[0] === 'DefaultCollection') {\n                        urlInfo.owner = splits[2];\n                        urlInfo.organization = splits[0];\n                        urlInfo.full_name = urlInfo.organization + '/_git/' + urlInfo.name;\n                    } else {\n                        urlInfo.owner = splits[0];\n                        urlInfo.full_name = urlInfo.owner + '/_git/' + urlInfo.name;\n                    }\n                } else if (splits.length === 4) {\n                    urlInfo.organization = splits[0];\n                    urlInfo.owner = splits[1];\n                    urlInfo.name = splits[3];\n                    urlInfo.full_name = urlInfo.organization + '/' + urlInfo.owner + '/_git/' + urlInfo.name;\n                }\n                break;\n            }\n        default:\n            splits = urlInfo.name.split(\"/\");\n            var nameIndex = splits.length - 1;\n            if (splits.length >= 2) {\n                var blobIndex = splits.indexOf(\"blob\", 2);\n                var treeIndex = splits.indexOf(\"tree\", 2);\n                var commitIndex = splits.indexOf(\"commit\", 2);\n                nameIndex = blobIndex > 0 ? blobIndex - 1 : treeIndex > 0 ? treeIndex - 1 : commitIndex > 0 ? commitIndex - 1 : nameIndex;\n\n                urlInfo.owner = splits.slice(0, nameIndex).join('/');\n                urlInfo.name = splits[nameIndex];\n                if (commitIndex) {\n                    urlInfo.commit = splits[nameIndex + 2];\n                }\n            }\n\n            urlInfo.ref = \"\";\n            urlInfo.filepathtype = \"\";\n            urlInfo.filepath = \"\";\n            if (splits.length > nameIndex + 2 && [\"blob\", \"tree\"].indexOf(splits[nameIndex + 1]) >= 0) {\n                urlInfo.filepathtype = splits[nameIndex + 1];\n                urlInfo.ref = splits[nameIndex + 2];\n                if (splits.length > nameIndex + 3) {\n                    urlInfo.filepath = splits.slice(nameIndex + 3).join('/');\n                }\n            }\n            urlInfo.organization = urlInfo.owner;\n            break;\n    }\n\n    if (!urlInfo.full_name) {\n        urlInfo.full_name = urlInfo.owner;\n        if (urlInfo.name) {\n            urlInfo.full_name && (urlInfo.full_name += \"/\");\n            urlInfo.full_name += urlInfo.name;\n        }\n    }\n\n    return urlInfo;\n}\n\n/**\n * stringify\n * Stringifies a `GitUrl` object.\n *\n * @name stringify\n * @function\n * @param {GitUrl} obj The parsed Git url object.\n * @param {String} type The type of the stringified url (default `obj.protocol`).\n * @return {String} The stringified url.\n */\ngitUrlParse.stringify = function (obj, type) {\n    type = type || (obj.protocols && obj.protocols.length ? obj.protocols.join('+') : obj.protocol);\n    var port = obj.port ? \":\" + obj.port : '';\n    var user = obj.user || 'git';\n    var maybeGitSuffix = obj.git_suffix ? \".git\" : \"\";\n    switch (type) {\n        case \"ssh\":\n            if (port) return \"ssh://\" + user + \"@\" + obj.resource + port + \"/\" + obj.full_name + maybeGitSuffix;else return user + \"@\" + obj.resource + \":\" + obj.full_name + maybeGitSuffix;\n        case \"git+ssh\":\n        case \"ssh+git\":\n        case \"ftp\":\n        case \"ftps\":\n            return type + \"://\" + user + \"@\" + obj.resource + port + \"/\" + obj.full_name + maybeGitSuffix;\n        case \"http\":\n        case \"https\":\n            var auth = obj.token ? buildToken(obj) : obj.user && (obj.protocols.includes('http') || obj.protocols.includes('https')) ? obj.user + \"@\" : \"\";\n            return type + \"://\" + auth + obj.resource + port + \"/\" + obj.full_name + maybeGitSuffix;\n        default:\n            return obj.href;\n    }\n};\n\n/*!\n * buildToken\n * Builds OAuth token prefix (helper function)\n *\n * @name buildToken\n * @function\n * @param {GitUrl} obj The parsed Git url object.\n * @return {String} token prefix\n */\nfunction buildToken(obj) {\n    switch (obj.source) {\n        case \"bitbucket.org\":\n            return \"x-token-auth:\" + obj.token + \"@\";\n        default:\n            return obj.token + \"@\";\n    }\n}\n\nmodule.exports = gitUrlParse;"]},"metadata":{},"sourceType":"script"}