{"ast":null,"code":"// https://docs.microsoft.com/en-us/vsts/pipelines/build/variables\n// The docs indicate that SYSTEM_PULLREQUEST_SOURCEBRANCH and SYSTEM_PULLREQUEST_TARGETBRANCH are in the long format (e.g `refs/heads/master`) however tests show they are both in the short format (e.g. `master`)\nmodule.exports = {\n  detect({\n    env\n  }) {\n    return Boolean(env.BUILD_BUILDURI);\n  },\n\n  configuration({\n    env\n  }) {\n    const pr = env.SYSTEM_PULLREQUEST_PULLREQUESTID;\n    const isPr = Boolean(pr);\n    return {\n      name: 'Visual Studio Team Services',\n      service: 'vsts',\n      commit: env.BUILD_SOURCEVERSION,\n      build: env.BUILD_BUILDNUMBER,\n      branch: isPr ? env.SYSTEM_PULLREQUEST_TARGETBRANCH : env.BUILD_SOURCEBRANCHNAME,\n      pr,\n      isPr,\n      prBranch: isPr ? env.SYSTEM_PULLREQUEST_SOURCEBRANCH : undefined,\n      root: env.BUILD_REPOSITORY_LOCALPATH\n    };\n  }\n\n};","map":{"version":3,"sources":["/Users/hristobelchev/test_projects/testing_react/react-box-app/box-app/node_modules/env-ci/services/vsts.js"],"names":["module","exports","detect","env","Boolean","BUILD_BUILDURI","configuration","pr","SYSTEM_PULLREQUEST_PULLREQUESTID","isPr","name","service","commit","BUILD_SOURCEVERSION","build","BUILD_BUILDNUMBER","branch","SYSTEM_PULLREQUEST_TARGETBRANCH","BUILD_SOURCEBRANCHNAME","prBranch","SYSTEM_PULLREQUEST_SOURCEBRANCH","undefined","root","BUILD_REPOSITORY_LOCALPATH"],"mappings":"AAAA;AACA;AAEAA,MAAM,CAACC,OAAP,GAAiB;AAChBC,EAAAA,MAAM,CAAC;AAACC,IAAAA;AAAD,GAAD,EAAQ;AACb,WAAOC,OAAO,CAACD,GAAG,CAACE,cAAL,CAAd;AACA,GAHe;;AAIhBC,EAAAA,aAAa,CAAC;AAACH,IAAAA;AAAD,GAAD,EAAQ;AACpB,UAAMI,EAAE,GAAGJ,GAAG,CAACK,gCAAf;AACA,UAAMC,IAAI,GAAGL,OAAO,CAACG,EAAD,CAApB;AAEA,WAAO;AACNG,MAAAA,IAAI,EAAE,6BADA;AAENC,MAAAA,OAAO,EAAE,MAFH;AAGNC,MAAAA,MAAM,EAAET,GAAG,CAACU,mBAHN;AAINC,MAAAA,KAAK,EAAEX,GAAG,CAACY,iBAJL;AAKNC,MAAAA,MAAM,EAAEP,IAAI,GAAGN,GAAG,CAACc,+BAAP,GAAyCd,GAAG,CAACe,sBALnD;AAMNX,MAAAA,EANM;AAONE,MAAAA,IAPM;AAQNU,MAAAA,QAAQ,EAAEV,IAAI,GAAGN,GAAG,CAACiB,+BAAP,GAAyCC,SARjD;AASNC,MAAAA,IAAI,EAAEnB,GAAG,CAACoB;AATJ,KAAP;AAWA;;AAnBe,CAAjB","sourcesContent":["// https://docs.microsoft.com/en-us/vsts/pipelines/build/variables\n// The docs indicate that SYSTEM_PULLREQUEST_SOURCEBRANCH and SYSTEM_PULLREQUEST_TARGETBRANCH are in the long format (e.g `refs/heads/master`) however tests show they are both in the short format (e.g. `master`)\n\nmodule.exports = {\n\tdetect({env}) {\n\t\treturn Boolean(env.BUILD_BUILDURI);\n\t},\n\tconfiguration({env}) {\n\t\tconst pr = env.SYSTEM_PULLREQUEST_PULLREQUESTID;\n\t\tconst isPr = Boolean(pr);\n\n\t\treturn {\n\t\t\tname: 'Visual Studio Team Services',\n\t\t\tservice: 'vsts',\n\t\t\tcommit: env.BUILD_SOURCEVERSION,\n\t\t\tbuild: env.BUILD_BUILDNUMBER,\n\t\t\tbranch: isPr ? env.SYSTEM_PULLREQUEST_TARGETBRANCH : env.BUILD_SOURCEBRANCHNAME,\n\t\t\tpr,\n\t\t\tisPr,\n\t\t\tprBranch: isPr ? env.SYSTEM_PULLREQUEST_SOURCEBRANCH : undefined,\n\t\t\troot: env.BUILD_REPOSITORY_LOCALPATH,\n\t\t};\n\t},\n};\n"]},"metadata":{},"sourceType":"script"}