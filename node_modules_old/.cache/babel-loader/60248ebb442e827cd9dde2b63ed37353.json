{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable no-process-exit */\n\n/* eslint-disable unicorn/no-process-exit */\n\nconst config_1 = require(\"./config\");\n\nconst pretty_print_1 = require(\"./errors/pretty-print\");\n\nconst _1 = require(\".\");\n\nconst clean = require(\"clean-stack\");\n\nconst cli_1 = require(\"./errors/cli\");\n\nexports.handle = err => {\n  var _a, _b, _c;\n\n  try {\n    if (!err) err = new cli_1.CLIError('no error?');\n    if (err.message === 'SIGINT') process.exit(1);\n    const shouldPrint = !(err instanceof _1.ExitError);\n    const pretty = pretty_print_1.default(err);\n    const stack = clean(err.stack || '', {\n      pretty: true\n    });\n\n    if (shouldPrint) {\n      console.error(pretty ? pretty : stack);\n    }\n\n    const exitCode = ((_a = err.oclif) === null || _a === void 0 ? void 0 : _a.exit) !== undefined && ((_b = err.oclif) === null || _b === void 0 ? void 0 : _b.exit) !== false ? (_c = err.oclif) === null || _c === void 0 ? void 0 : _c.exit : 1;\n\n    if (config_1.config.errorLogger && err.code !== 'EEXIT') {\n      if (stack) {\n        config_1.config.errorLogger.log(stack);\n      }\n\n      config_1.config.errorLogger.flush().then(() => process.exit(exitCode)).catch(console.error);\n    } else process.exit(exitCode);\n  } catch (error) {\n    console.error(err.stack);\n    console.error(error.stack);\n    process.exit(1);\n  }\n};","map":{"version":3,"sources":["/Users/hristobelchev/test_projects/testing_react/react-box-app/box-app/node_modules/@oclif/errors/lib/handle.js"],"names":["Object","defineProperty","exports","value","config_1","require","pretty_print_1","_1","clean","cli_1","handle","err","_a","_b","_c","CLIError","message","process","exit","shouldPrint","ExitError","pretty","default","stack","console","error","exitCode","oclif","undefined","config","errorLogger","code","log","flush","then","catch"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACA;;AACA;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMC,cAAc,GAAGD,OAAO,CAAC,uBAAD,CAA9B;;AACA,MAAME,EAAE,GAAGF,OAAO,CAAC,GAAD,CAAlB;;AACA,MAAMG,KAAK,GAAGH,OAAO,CAAC,aAAD,CAArB;;AACA,MAAMI,KAAK,GAAGJ,OAAO,CAAC,cAAD,CAArB;;AACAH,OAAO,CAACQ,MAAR,GAAkBC,GAAD,IAAS;AACtB,MAAIC,EAAJ,EAAQC,EAAR,EAAYC,EAAZ;;AACA,MAAI;AACA,QAAI,CAACH,GAAL,EACIA,GAAG,GAAG,IAAIF,KAAK,CAACM,QAAV,CAAmB,WAAnB,CAAN;AACJ,QAAIJ,GAAG,CAACK,OAAJ,KAAgB,QAApB,EACIC,OAAO,CAACC,IAAR,CAAa,CAAb;AACJ,UAAMC,WAAW,GAAG,EAAER,GAAG,YAAYJ,EAAE,CAACa,SAApB,CAApB;AACA,UAAMC,MAAM,GAAGf,cAAc,CAACgB,OAAf,CAAuBX,GAAvB,CAAf;AACA,UAAMY,KAAK,GAAGf,KAAK,CAACG,GAAG,CAACY,KAAJ,IAAa,EAAd,EAAkB;AAAEF,MAAAA,MAAM,EAAE;AAAV,KAAlB,CAAnB;;AACA,QAAIF,WAAJ,EAAiB;AACbK,MAAAA,OAAO,CAACC,KAAR,CAAcJ,MAAM,GAAGA,MAAH,GAAYE,KAAhC;AACH;;AACD,UAAMG,QAAQ,GAAG,CAAC,CAACd,EAAE,GAAGD,GAAG,CAACgB,KAAV,MAAqB,IAArB,IAA6Bf,EAAE,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,EAAE,CAACM,IAA1D,MAAoEU,SAApE,IAAiF,CAAC,CAACf,EAAE,GAAGF,GAAG,CAACgB,KAAV,MAAqB,IAArB,IAA6Bd,EAAE,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,EAAE,CAACK,IAA1D,MAAoE,KAArJ,GAA6J,CAACJ,EAAE,GAAGH,GAAG,CAACgB,KAAV,MAAqB,IAArB,IAA6Bb,EAAE,KAAK,KAAK,CAAzC,GAA6C,KAAK,CAAlD,GAAsDA,EAAE,CAACI,IAAtN,GAA6N,CAA9O;;AACA,QAAId,QAAQ,CAACyB,MAAT,CAAgBC,WAAhB,IAA+BnB,GAAG,CAACoB,IAAJ,KAAa,OAAhD,EAAyD;AACrD,UAAIR,KAAJ,EAAW;AACPnB,QAAAA,QAAQ,CAACyB,MAAT,CAAgBC,WAAhB,CAA4BE,GAA5B,CAAgCT,KAAhC;AACH;;AACDnB,MAAAA,QAAQ,CAACyB,MAAT,CAAgBC,WAAhB,CAA4BG,KAA5B,GACKC,IADL,CACU,MAAMjB,OAAO,CAACC,IAAR,CAAaQ,QAAb,CADhB,EAEKS,KAFL,CAEWX,OAAO,CAACC,KAFnB;AAGH,KAPD,MASIR,OAAO,CAACC,IAAR,CAAaQ,QAAb;AACP,GAtBD,CAuBA,OAAOD,KAAP,EAAc;AACVD,IAAAA,OAAO,CAACC,KAAR,CAAcd,GAAG,CAACY,KAAlB;AACAC,IAAAA,OAAO,CAACC,KAAR,CAAcA,KAAK,CAACF,KAApB;AACAN,IAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACH;AACJ,CA9BD","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable no-process-exit */\n/* eslint-disable unicorn/no-process-exit */\nconst config_1 = require(\"./config\");\nconst pretty_print_1 = require(\"./errors/pretty-print\");\nconst _1 = require(\".\");\nconst clean = require(\"clean-stack\");\nconst cli_1 = require(\"./errors/cli\");\nexports.handle = (err) => {\n    var _a, _b, _c;\n    try {\n        if (!err)\n            err = new cli_1.CLIError('no error?');\n        if (err.message === 'SIGINT')\n            process.exit(1);\n        const shouldPrint = !(err instanceof _1.ExitError);\n        const pretty = pretty_print_1.default(err);\n        const stack = clean(err.stack || '', { pretty: true });\n        if (shouldPrint) {\n            console.error(pretty ? pretty : stack);\n        }\n        const exitCode = ((_a = err.oclif) === null || _a === void 0 ? void 0 : _a.exit) !== undefined && ((_b = err.oclif) === null || _b === void 0 ? void 0 : _b.exit) !== false ? (_c = err.oclif) === null || _c === void 0 ? void 0 : _c.exit : 1;\n        if (config_1.config.errorLogger && err.code !== 'EEXIT') {\n            if (stack) {\n                config_1.config.errorLogger.log(stack);\n            }\n            config_1.config.errorLogger.flush()\n                .then(() => process.exit(exitCode))\n                .catch(console.error);\n        }\n        else\n            process.exit(exitCode);\n    }\n    catch (error) {\n        console.error(err.stack);\n        console.error(error.stack);\n        process.exit(1);\n    }\n};\n"]},"metadata":{},"sourceType":"script"}