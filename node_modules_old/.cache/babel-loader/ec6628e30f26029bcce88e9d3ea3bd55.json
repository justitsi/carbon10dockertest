{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst events_1 = require(\"./events\");\n\nconst Is = require(\"./is\");\n\nvar CancellationToken;\n\n(function (CancellationToken) {\n  CancellationToken.None = Object.freeze({\n    isCancellationRequested: false,\n    onCancellationRequested: events_1.Event.None\n  });\n  CancellationToken.Cancelled = Object.freeze({\n    isCancellationRequested: true,\n    onCancellationRequested: events_1.Event.None\n  });\n\n  function is(value) {\n    let candidate = value;\n    return candidate && (candidate === CancellationToken.None || candidate === CancellationToken.Cancelled || Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested);\n  }\n\n  CancellationToken.is = is;\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\n\nconst shortcutEvent = Object.freeze(function (callback, context) {\n  let handle = setTimeout(callback.bind(context), 0);\n  return {\n    dispose() {\n      clearTimeout(handle);\n    }\n\n  };\n});\n\nclass MutableToken {\n  constructor() {\n    this._isCancelled = false;\n  }\n\n  cancel() {\n    if (!this._isCancelled) {\n      this._isCancelled = true;\n\n      if (this._emitter) {\n        this._emitter.fire(undefined);\n\n        this._emitter = undefined;\n      }\n    }\n  }\n\n  get isCancellationRequested() {\n    return this._isCancelled;\n  }\n\n  get onCancellationRequested() {\n    if (this._isCancelled) {\n      return shortcutEvent;\n    }\n\n    if (!this._emitter) {\n      this._emitter = new events_1.Emitter();\n    }\n\n    return this._emitter.event;\n  }\n\n}\n\nclass CancellationTokenSource {\n  get token() {\n    if (!this._token) {\n      // be lazy and create the token only when\n      // actually needed\n      this._token = new MutableToken();\n    }\n\n    return this._token;\n  }\n\n  cancel() {\n    if (!this._token) {\n      // save an object by returning the default\n      // cancelled token when cancellation happens\n      // before someone asks for the token\n      this._token = CancellationToken.Cancelled;\n    } else {\n      this._token.cancel();\n    }\n  }\n\n  dispose() {\n    this.cancel();\n  }\n\n}\n\nexports.CancellationTokenSource = CancellationTokenSource;","map":{"version":3,"sources":["/Users/hristobelchev/test_projects/testing_react/react-box-app/box-app/node_modules/vscode-jsonrpc/lib/cancellation.js"],"names":["Object","defineProperty","exports","value","events_1","require","Is","CancellationToken","None","freeze","isCancellationRequested","onCancellationRequested","Event","Cancelled","is","candidate","boolean","shortcutEvent","callback","context","handle","setTimeout","bind","dispose","clearTimeout","MutableToken","constructor","_isCancelled","cancel","_emitter","fire","undefined","Emitter","event","CancellationTokenSource","token","_token"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this._emitter = undefined;\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        this.cancel();\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n"]},"metadata":{},"sourceType":"script"}