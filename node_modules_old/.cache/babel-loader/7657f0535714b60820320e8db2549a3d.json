{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar isWindows;\n\nif (typeof process === 'object') {\n  isWindows = process.platform === 'win32';\n} else if (typeof navigator === 'object') {\n  var userAgent = navigator.userAgent;\n  isWindows = userAgent.indexOf('Windows') >= 0;\n} //#endregion\n\n\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\n\nfunction _validateUri(ret) {\n  // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n  // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n  if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n    throw new Error('[UriError]: Scheme contains illegal characters.');\n  } // path, http://tools.ietf.org/html/rfc3986#section-3.3\n  // If a URI contains an authority component, then the path component\n  // must either be empty or begin with a slash (\"/\") character.  If a URI\n  // does not contain an authority component, then the path cannot begin\n  // with two slash characters (\"//\").\n\n\n  if (ret.path) {\n    if (ret.authority) {\n      if (!_singleSlashStart.test(ret.path)) {\n        throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n      }\n    } else {\n      if (_doubleSlashStart.test(ret.path)) {\n        throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n      }\n    }\n  }\n} // implements a bit of https://tools.ietf.org/html/rfc3986#section-5\n\n\nfunction _referenceResolution(scheme, path) {\n  // the slash-character is our 'default base' as we don't\n  // support constructing URIs relative to other URIs. This\n  // also means that we alter and potentially break paths.\n  // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n  switch (scheme) {\n    case 'https':\n    case 'http':\n    case 'file':\n      if (!path) {\n        path = _slash;\n      } else if (path[0] !== _slash) {\n        path = _slash + path;\n      }\n\n      break;\n  }\n\n  return path;\n}\n\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n */\n\nvar URI = function () {\n  /**\n   * @internal\n   */\n  function URI(schemeOrData, authority, path, query, fragment) {\n    if (typeof schemeOrData === 'object') {\n      this.scheme = schemeOrData.scheme || _empty;\n      this.authority = schemeOrData.authority || _empty;\n      this.path = schemeOrData.path || _empty;\n      this.query = schemeOrData.query || _empty;\n      this.fragment = schemeOrData.fragment || _empty; // no validation because it's this URI\n      // that creates uri components.\n      // _validateUri(this);\n    } else {\n      this.scheme = schemeOrData || _empty;\n      this.authority = authority || _empty;\n      this.path = _referenceResolution(this.scheme, path || _empty);\n      this.query = query || _empty;\n      this.fragment = fragment || _empty;\n\n      _validateUri(this);\n    }\n  }\n\n  URI.isUri = function (thing) {\n    if (thing instanceof URI) {\n      return true;\n    }\n\n    if (!thing) {\n      return false;\n    }\n\n    return typeof thing.authority === 'string' && typeof thing.fragment === 'string' && typeof thing.path === 'string' && typeof thing.query === 'string' && typeof thing.scheme === 'string';\n  };\n\n  Object.defineProperty(URI.prototype, \"fsPath\", {\n    // ---- filesystem path -----------------------\n\n    /**\n     * Returns a string representing the corresponding file system path of this URI.\n     * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n     * platform specific path separator.\n     *\n     * * Will *not* validate the path for invalid characters and semantics.\n     * * Will *not* look at the scheme of this URI.\n     * * The result shall *not* be used for display purposes but for accessing a file on disk.\n     *\n     *\n     * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n     * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n     *\n     * ```ts\n        const u = URI.parse('file://server/c$/folder/file.txt')\n        u.authority === 'server'\n        u.path === '/shares/c$/file.txt'\n        u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n    ```\n     *\n     * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n     * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n     * with URIs that represent files on disk (`file` scheme).\n     */\n    get: function () {\n      // if (this.scheme !== 'file') {\n      // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n      // }\n      return _makeFsPath(this);\n    },\n    enumerable: true,\n    configurable: true\n  }); // ---- modify to new -------------------------\n\n  URI.prototype.with = function (change) {\n    if (!change) {\n      return this;\n    }\n\n    var scheme = change.scheme,\n        authority = change.authority,\n        path = change.path,\n        query = change.query,\n        fragment = change.fragment;\n\n    if (scheme === void 0) {\n      scheme = this.scheme;\n    } else if (scheme === null) {\n      scheme = _empty;\n    }\n\n    if (authority === void 0) {\n      authority = this.authority;\n    } else if (authority === null) {\n      authority = _empty;\n    }\n\n    if (path === void 0) {\n      path = this.path;\n    } else if (path === null) {\n      path = _empty;\n    }\n\n    if (query === void 0) {\n      query = this.query;\n    } else if (query === null) {\n      query = _empty;\n    }\n\n    if (fragment === void 0) {\n      fragment = this.fragment;\n    } else if (fragment === null) {\n      fragment = _empty;\n    }\n\n    if (scheme === this.scheme && authority === this.authority && path === this.path && query === this.query && fragment === this.fragment) {\n      return this;\n    }\n\n    return new _URI(scheme, authority, path, query, fragment);\n  }; // ---- parse & validate ------------------------\n\n  /**\n   * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n   * `file:///usr/home`, or `scheme:with/path`.\n   *\n   * @param value A string which represents an URI (see `URI#toString`).\n   */\n\n\n  URI.parse = function (value) {\n    var match = _regexp.exec(value);\n\n    if (!match) {\n      return new _URI(_empty, _empty, _empty, _empty, _empty);\n    }\n\n    return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty));\n  };\n  /**\n   * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n   * `/usr/home`, or `\\\\server\\share\\some\\path`.\n   *\n   * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n   * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n   * `URI.parse('file://' + path)` because the path might contain characters that are\n   * interpreted (# and ?). See the following sample:\n   * ```ts\n  const good = URI.file('/coding/c#/project1');\n  good.scheme === 'file';\n  good.path === '/coding/c#/project1';\n  good.fragment === '';\n   const bad = URI.parse('file://' + '/coding/c#/project1');\n  bad.scheme === 'file';\n  bad.path === '/coding/c'; // path is now broken\n  bad.fragment === '/project1';\n  ```\n   *\n   * @param path A file system path (see `URI#fsPath`)\n   */\n\n\n  URI.file = function (path) {\n    var authority = _empty; // normalize to fwd-slashes on windows,\n    // on other systems bwd-slashes are valid\n    // filename character, eg /f\\oo/ba\\r.txt\n\n    if (isWindows) {\n      path = path.replace(/\\\\/g, _slash);\n    } // check for authority as used in UNC shares\n    // or use the path as given\n\n\n    if (path[0] === _slash && path[1] === _slash) {\n      var idx = path.indexOf(_slash, 2);\n\n      if (idx === -1) {\n        authority = path.substring(2);\n        path = _slash;\n      } else {\n        authority = path.substring(2, idx);\n        path = path.substring(idx) || _slash;\n      }\n    }\n\n    return new _URI('file', authority, path, _empty, _empty);\n  };\n\n  URI.from = function (components) {\n    return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n  }; // ---- printing/externalize ---------------------------\n\n  /**\n   * Creates a string presentation for this URI. It's guardeed that calling\n   * `URI.parse` with the result of this function creates an URI which is equal\n   * to this URI.\n   *\n   * * The result shall *not* be used for display purposes but for externalization or transport.\n   * * The result will be encoded using the percentage encoding and encoding happens mostly\n   * ignore the scheme-specific encoding rules.\n   *\n   * @param skipEncoding Do not encode the result, default is `false`\n   */\n\n\n  URI.prototype.toString = function (skipEncoding) {\n    if (skipEncoding === void 0) {\n      skipEncoding = false;\n    }\n\n    return _asFormatted(this, skipEncoding);\n  };\n\n  URI.prototype.toJSON = function () {\n    return this;\n  };\n\n  URI.revive = function (data) {\n    if (!data) {\n      return data;\n    } else if (data instanceof URI) {\n      return data;\n    } else {\n      var result = new _URI(data);\n      result._fsPath = data.fsPath;\n      result._formatted = data.external;\n      return result;\n    }\n  };\n\n  return URI;\n}();\n\nexport default URI; // tslint:disable-next-line:class-name\n\nvar _URI = function (_super) {\n  __extends(_URI, _super);\n\n  function _URI() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._formatted = null;\n    _this._fsPath = null;\n    return _this;\n  }\n\n  Object.defineProperty(_URI.prototype, \"fsPath\", {\n    get: function () {\n      if (!this._fsPath) {\n        this._fsPath = _makeFsPath(this);\n      }\n\n      return this._fsPath;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  _URI.prototype.toString = function (skipEncoding) {\n    if (skipEncoding === void 0) {\n      skipEncoding = false;\n    }\n\n    if (!skipEncoding) {\n      if (!this._formatted) {\n        this._formatted = _asFormatted(this, false);\n      }\n\n      return this._formatted;\n    } else {\n      // we don't cache that\n      return _asFormatted(this, true);\n    }\n  };\n\n  _URI.prototype.toJSON = function () {\n    var res = {\n      $mid: 1\n    }; // cached state\n\n    if (this._fsPath) {\n      res.fsPath = this._fsPath;\n    }\n\n    if (this._formatted) {\n      res.external = this._formatted;\n    } // uri components\n\n\n    if (this.path) {\n      res.path = this.path;\n    }\n\n    if (this.scheme) {\n      res.scheme = this.scheme;\n    }\n\n    if (this.authority) {\n      res.authority = this.authority;\n    }\n\n    if (this.query) {\n      res.query = this.query;\n    }\n\n    if (this.fragment) {\n      res.fragment = this.fragment;\n    }\n\n    return res;\n  };\n\n  return _URI;\n}(URI); // reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\n\n\nvar encodeTable = (_a = {}, _a[58\n/* Colon */\n] = '%3A', _a[47\n/* Slash */\n] = '%2F', _a[63\n/* QuestionMark */\n] = '%3F', _a[35\n/* Hash */\n] = '%23', _a[91\n/* OpenSquareBracket */\n] = '%5B', _a[93\n/* CloseSquareBracket */\n] = '%5D', _a[64\n/* AtSign */\n] = '%40', _a[33\n/* ExclamationMark */\n] = '%21', _a[36\n/* DollarSign */\n] = '%24', _a[38\n/* Ampersand */\n] = '%26', _a[39\n/* SingleQuote */\n] = '%27', _a[40\n/* OpenParen */\n] = '%28', _a[41\n/* CloseParen */\n] = '%29', _a[42\n/* Asterisk */\n] = '%2A', _a[43\n/* Plus */\n] = '%2B', _a[44\n/* Comma */\n] = '%2C', _a[59\n/* Semicolon */\n] = '%3B', _a[61\n/* Equals */\n] = '%3D', _a[32\n/* Space */\n] = '%20', _a);\n\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n  var res = undefined;\n  var nativeEncodePos = -1;\n\n  for (var pos = 0; pos < uriComponent.length; pos++) {\n    var code = uriComponent.charCodeAt(pos); // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n\n    if (code >= 97\n    /* a */\n    && code <= 122\n    /* z */\n    || code >= 65\n    /* A */\n    && code <= 90\n    /* Z */\n    || code >= 48\n    /* Digit0 */\n    && code <= 57\n    /* Digit9 */\n    || code === 45\n    /* Dash */\n    || code === 46\n    /* Period */\n    || code === 95\n    /* Underline */\n    || code === 126\n    /* Tilde */\n    || allowSlash && code === 47\n    /* Slash */\n    ) {\n      // check if we are delaying native encode\n      if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n        nativeEncodePos = -1;\n      } // check if we write into a new string (by default we try to return the param)\n\n\n      if (res !== undefined) {\n        res += uriComponent.charAt(pos);\n      }\n    } else {\n      // encoding needed, we need to allocate a new string\n      if (res === undefined) {\n        res = uriComponent.substr(0, pos);\n      } // check with default table first\n\n\n      var escaped = encodeTable[code];\n\n      if (escaped !== undefined) {\n        // check if we are delaying native encode\n        if (nativeEncodePos !== -1) {\n          res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n          nativeEncodePos = -1;\n        } // append escaped variant to result\n\n\n        res += escaped;\n      } else if (nativeEncodePos === -1) {\n        // use native encode only when needed\n        nativeEncodePos = pos;\n      }\n    }\n  }\n\n  if (nativeEncodePos !== -1) {\n    res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n  }\n\n  return res !== undefined ? res : uriComponent;\n}\n\nfunction encodeURIComponentMinimal(path) {\n  var res = undefined;\n\n  for (var pos = 0; pos < path.length; pos++) {\n    var code = path.charCodeAt(pos);\n\n    if (code === 35\n    /* Hash */\n    || code === 63\n    /* QuestionMark */\n    ) {\n        if (res === undefined) {\n          res = path.substr(0, pos);\n        }\n\n        res += encodeTable[code];\n      } else {\n      if (res !== undefined) {\n        res += path[pos];\n      }\n    }\n  }\n\n  return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n * @param uri\n */\n\n\nfunction _makeFsPath(uri) {\n  var value;\n\n  if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n    // unc path: file://shares/c$/far/boo\n    value = \"//\" + uri.authority + uri.path;\n  } else if (uri.path.charCodeAt(0) === 47\n  /* Slash */\n  && (uri.path.charCodeAt(1) >= 65\n  /* A */\n  && uri.path.charCodeAt(1) <= 90\n  /* Z */\n  || uri.path.charCodeAt(1) >= 97\n  /* a */\n  && uri.path.charCodeAt(1) <= 122\n  /* z */\n  ) && uri.path.charCodeAt(2) === 58\n  /* Colon */\n  ) {\n      // windows drive letter: file:///c:/far/boo\n      value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    } else {\n    // other path\n    value = uri.path;\n  }\n\n  if (isWindows) {\n    value = value.replace(/\\//g, '\\\\');\n  }\n\n  return value;\n}\n/**\n * Create the external version of a uri\n */\n\n\nfunction _asFormatted(uri, skipEncoding) {\n  var encoder = !skipEncoding ? encodeURIComponentFast : encodeURIComponentMinimal;\n  var res = '';\n  var scheme = uri.scheme,\n      authority = uri.authority,\n      path = uri.path,\n      query = uri.query,\n      fragment = uri.fragment;\n\n  if (scheme) {\n    res += scheme;\n    res += ':';\n  }\n\n  if (authority || scheme === 'file') {\n    res += _slash;\n    res += _slash;\n  }\n\n  if (authority) {\n    var idx = authority.indexOf('@');\n\n    if (idx !== -1) {\n      // <user>@<auth>\n      var userinfo = authority.substr(0, idx);\n      authority = authority.substr(idx + 1);\n      idx = userinfo.indexOf(':');\n\n      if (idx === -1) {\n        res += encoder(userinfo, false);\n      } else {\n        // <user>:<pass>@<auth>\n        res += encoder(userinfo.substr(0, idx), false);\n        res += ':';\n        res += encoder(userinfo.substr(idx + 1), false);\n      }\n\n      res += '@';\n    }\n\n    authority = authority.toLowerCase();\n    idx = authority.indexOf(':');\n\n    if (idx === -1) {\n      res += encoder(authority, false);\n    } else {\n      // <auth>:<port>\n      res += encoder(authority.substr(0, idx), false);\n      res += authority.substr(idx);\n    }\n  }\n\n  if (path) {\n    // lower-case windows drive letters in /C:/fff or C:/fff\n    if (path.length >= 3 && path.charCodeAt(0) === 47\n    /* Slash */\n    && path.charCodeAt(2) === 58\n    /* Colon */\n    ) {\n        var code = path.charCodeAt(1);\n\n        if (code >= 65\n        /* A */\n        && code <= 90\n        /* Z */\n        ) {\n            path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n          }\n      } else if (path.length >= 2 && path.charCodeAt(1) === 58\n    /* Colon */\n    ) {\n        var code = path.charCodeAt(0);\n\n        if (code >= 65\n        /* A */\n        && code <= 90\n        /* Z */\n        ) {\n            path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n          }\n      } // encode the rest of the path\n\n\n    res += encoder(path, true);\n  }\n\n  if (query) {\n    res += '?';\n    res += encoder(query, false);\n  }\n\n  if (fragment) {\n    res += '#';\n    res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n  }\n\n  return res;\n}\n\nvar _a;","map":{"version":3,"sources":["/Users/hristobelchev/test_projects/testing_react/react-box-app/box-app/node_modules/vscode-uri/lib/esm/index.js"],"names":["__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","isWindows","process","platform","navigator","userAgent","indexOf","_schemePattern","_singleSlashStart","_doubleSlashStart","_validateUri","ret","scheme","test","Error","path","authority","_referenceResolution","_slash","_empty","_regexp","URI","schemeOrData","query","fragment","isUri","thing","defineProperty","get","_makeFsPath","enumerable","configurable","with","change","_URI","parse","value","match","exec","decodeURIComponent","file","replace","idx","substring","from","components","toString","skipEncoding","_asFormatted","toJSON","revive","data","result","_fsPath","fsPath","_formatted","external","_super","_this","apply","arguments","res","$mid","encodeTable","_a","encodeURIComponentFast","uriComponent","allowSlash","undefined","nativeEncodePos","pos","length","code","charCodeAt","encodeURIComponent","charAt","substr","escaped","encodeURIComponentMinimal","uri","toLowerCase","encoder","userinfo","String","fromCharCode"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret) {\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n */\nvar URI = (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment) {\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = schemeOrData || _empty;\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return _makeFsPath(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === void 0) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === void 0) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === void 0) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === void 0) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === void 0) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value) {\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty));\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string presentation for this URI. It's guardeed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._fsPath = data.fsPath;\n            result._formatted = data.external;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport default URI;\n// tslint:disable-next-line:class-name\nvar _URI = (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = _makeFsPath(this);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n * @param uri\n */\nfunction _makeFsPath(uri) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        // windows drive letter: file:///c:/far/boo\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\nvar _a;\n"]},"metadata":{},"sourceType":"module"}